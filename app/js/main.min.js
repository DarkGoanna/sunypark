"use strict";const html=document.documentElement,header=document.querySelector(".header"),headerRow_1=document.querySelector(".header__row_1"),headerRow_2=document.querySelector(".header__row_2"),menu=document.querySelector(".header__menu"),menuList=menu.querySelector(".menu"),burger=document.querySelector(".header__burger"),desktopBreakpoint=768,API_KEY="AIzaSyDWQ9VHKbmvicDUzePMB9pRT9RxotohyQ0";function fixHeaderHeight(){header.nextElementSibling.style.paddingTop=header.offsetHeight+"px"}function addMenuArrow(){menu.querySelectorAll(".menu-item-has-children > a").forEach(e=>{e.insertAdjacentHTML("beforeend",'<button type="button" class="menu__arrow"></button>')})}function setIterationVar(){menu.querySelectorAll(".menu > li").forEach((e,t,o)=>{e.style.setProperty("--in",t),e.style.setProperty("--out",o.length-1-t)}),menu.querySelectorAll(".sub-menu").forEach(e=>{e.querySelectorAll("li").forEach((e,t,o)=>{e.style.setProperty("--sub_in",t),e.style.setProperty("--sub_out",o.length-1-t)})})}function addButtonComeback(){document.querySelectorAll(".sub-menu").forEach(e=>{const t=document.createElement("button");t.classList.add("menu__comeback"),t.textContent="Назад",t.onclick=closeAllSubmenu,e.prepend(t)})}function setSubmenuPosition(){document.querySelectorAll(".sub-menu").forEach(e=>{const t=e.parentElement.offsetTop;e.style.top=`-${t}px`})}function resetSubmenuPosition(){document.querySelectorAll(".sub-menu").forEach(e=>{e.style.top=""})}function addEventToMenuArrow(){document.querySelectorAll(".menu__arrow").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),window.matchMedia("(max-width: 768px)").matches&&(e.closest(".menu-item-has-children").classList.toggle("open"),menuList.classList.toggle("show-sub-menu"))},!0)})}function addEventToMenuItem(){menu.querySelectorAll(".menu-item-has-children").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),e.classList.toggle("open"),fixHeaderHeight(),window.matchMedia("(max-width: 768px)").matches&&menuList.classList.toggle("show-sub-menu")},!0)})}function closeAllSubmenu(){menu.querySelectorAll(".menu-item-has-children").forEach(e=>{e.classList.remove("open")}),menu.querySelector(".menu").classList.remove("show-sub-menu")}burger.addEventListener("click",()=>{burger.classList.toggle("open"),menu.classList.toggle("open"),html.classList.toggle("scrollOff"),closeAllSubmenu()}),window.addEventListener("resize",()=>{window.innerWidth>768?(burger.classList.remove("open"),menu.classList.remove("open"),fixHeaderHeight(),closeAllSubmenu(),resetSubmenuPosition()):setSubmenuPosition()}),window.addEventListener("load",()=>{addMenuArrow(),addButtonComeback(),addEventToMenuArrow(),setIterationVar(),window.matchMedia("(max-width: 768px)").matches&&setSubmenuPosition()}),window.addEventListener("load",fixHeaderHeight),window.addEventListener("resize",fixHeaderHeight);let prevScrollPosition=window.pageYOffset;function isApple(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function declOfNum(e,t){return t[e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2]}function checkboxStatus(e,t){const o=document.querySelector(t),n=declOfNum(e,["элемент","элемента","элементов"]);o.textContent=`${e} ${n} выбрано`;const s=!!e;o.setAttribute("data-hasChecked",s)}function addCustomCheckbox(e,t){const o=document.querySelectorAll(`${e} ${t}`);if(o.length){let t=0;o.forEach(o=>{o.insertAdjacentHTML("beforeend",'<span class="custom-checkbox"></span>');o.querySelector('input[type="checkbox"]').addEventListener("change",(function(){t=this.checked?++t:--t,checkboxStatus(t,e+" .cost-form__status-text")}))}),checkboxStatus(t,e+" .cost-form__status-text")}}function openCustomSelect(e){const t=document.querySelector(e+" .cost-form__checkbox-wrapper"),o=document.querySelector(e+" .cost-form__arrow");t&&document.addEventListener("click",n=>{const{target:s}=n;s.classList.contains(e+" cost-form__checkbox-wrapper")||s.closest(e+" .cost-form__checkbox-wrapper")?(t.classList.add("open"),o.classList.add("open")):s.classList.contains(e+" cost-form__status")||s.closest(e+" .cost-form__status")?(t.classList.toggle("open"),o.classList.toggle("open")):(t.classList.remove("open"),o.classList.remove("open"))})}window.addEventListener("scroll",()=>{const e=window.innerWidth>768?headerRow_1.offsetHeight:document.querySelector(".header").offsetHeight,t=window.pageYOffset;prevScrollPosition>t?header.style.top="0":t>400&&(header.style.top=`-${e}px`),prevScrollPosition=t}),window.addEventListener("load",()=>{isApple()&&document.querySelector("html").classList.add("ios")}),addCustomCheckbox(".cost-form__health",".cost-form__custom-checkbox"),openCustomSelect(".cost-form__health");const costFormTrigger=document.querySelector(".cost-form__trigger");costFormTrigger&&costFormTrigger.addEventListener("click",(function(){this.closest(".cost-form").classList.toggle("open"),this.classList.toggle("hidden")}));const calcButton=document.querySelector("#cost-form__calculate");calcButton&&calcButton.addEventListener("click",()=>{const e=document.querySelector("#cost-form__data"),t=document.querySelector("#age"),o=document.querySelector('input[name="gender"]:checked'),n=document.querySelectorAll('.cost-form__custom-checkbox input[name="health"]:checked'),s=t.value?t.value:null,r=o?o.value:null,i=[];if(n.length)for(let e=0;e<n.length;e++)i.push(n[e].value);e.value=`Возраст пациента: ${s}\nПол: ${r}\nСостояние здоровья: ${i.join("\n")}`});const whatYouGetSvg=document.querySelector(".what-you-get__image svg path");if(whatYouGetSvg){const e=whatYouGetSvg.getTotalLength();whatYouGetSvg.style.WebkitTransition="none",whatYouGetSvg.style.strokeDasharray=e+" "+e,whatYouGetSvg.style.strokeDashoffset=e,whatYouGetSvg.getBoundingClientRect(),whatYouGetSvg.style.transition=whatYouGetSvg.style.WebkitTransition="stroke-dashoffset 5s ease-in-out",whatYouGetSvg.style.strokeDashoffset="0"}const teamSlider=document.querySelector(".team__slider");teamSlider&&new Swiper(teamSlider,{slidesPerView:4,spaceBetween:30,pagination:{el:".team__slider .swiper-pagination",clickable:!0},navigation:{nextEl:".team__slider .swiper-button-next",prevEl:".team__slider .swiper-button-prev"},breakpoints:{0:{slidesPerView:1,spaceBetween:10},580:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:30},1e3:{slidesPerView:4,spaceBetween:30}}});const routineSlider=document.querySelector(".routine__slider");if(routineSlider){const e=routineSlider.querySelectorAll(".routine__slide-title--text");new Swiper(routineSlider,{slidesPerView:1,spaceBetween:30,autoHeight:!0,pagination:{el:".routine__pagination",clickable:!0,renderBullet:function(t,o){return`<span class="${o}">${t+1}<span class="routine__pagination--text">. ${e[t].textContent}</span></span>`}},navigation:{nextEl:".routine__next",prevEl:".routine__prev"}})}const gallerySliderWrappers=document.querySelectorAll(".gallery__slider");gallerySliderWrappers&&gallerySliderWrappers.forEach(e=>{const t=e.querySelector(".swiper"),o=e.querySelector(".gallery__prev"),n=e.querySelector(".gallery__next"),s=e.querySelector(".gallery__pagination");new Swiper(t,{slidesPerView:3,spaceBetween:30,navigation:{nextEl:n,prevEl:o},pagination:{el:s,clickable:!0},breakpoints:{0:{slidesPerView:1,spaceBetween:10},580:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:15},1e3:{spaceBetween:30}}})});const clockWrapper=document.querySelector(".relative-receive__inner");if(clockWrapper){function getAngle(e){let t,o,n,s,r,i;return n=clockWrapper.offsetLeft+clockWrapper.offsetWidth/2,s=clockWrapper.offsetTop+clockWrapper.offsetHeight/2,t=e.pageX-n,o=s-e.pageY,r=Math.atan(o/t),e.pageX<n&&s>e.pageY&&(r+=Math.PI),e.pageX<n&&s<e.pageY&&(r+=Math.PI),e.pageX>n&&s<e.pageY&&(r+=2*Math.PI),i=function(e){return 180*e/Math.PI}(r).toFixed(0),i}document.addEventListener("mousemove",e=>{if(window.matchMedia("(min-width: 768px)").matches){const t=getAngle(e);document.querySelector(".relative-receive__magic-line").style.transform=`rotate(-${t}deg)`}})}if(document.querySelector(".seo")){const e="Свернуть",t="Подробнее",o=document.querySelector(".seo__text"),n=o.offsetHeight,s=Number.parseInt(o.style.getPropertyValue("--height"));if(n>s){o.parentElement.insertAdjacentHTML("beforeend",'<button type="button" class="seo__btn btn"></button>');const r=document.querySelector(".seo__btn");o.classList.add("less"),r.textContent=t,r.addEventListener("click",()=>{o.classList.toggle("less"),o.classList.contains("less")?(r.textContent=t,o.style.maxHeight=s+"px"):(r.textContent=e,o.style.maxHeight=n+80+"px")})}}function getVideoID(e){return e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i)[1]}const videoReviews=document.querySelector(".video-reviews");if(videoReviews){const e=videoReviews.querySelectorAll(".video-reviews__video");let t;e.length&&e.forEach(e=>{const t=getVideoID(e.getAttribute("data-link"));fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${t}&key=${API_KEY}`).then(e=>e.json()).then(o=>{const n=o.items[0].snippet;let s=`http://img.youtube.com/vi/${t}/mqdefault.jpg`;e.insertAdjacentHTML("beforeend",`<div class="video-reviews__image">\n                        <a href="https://www.youtube.com/embed/${t}" data-fancybox="video-reviews">\n                            <img src="${s}" alt="${n.title}">\n                        </a>\n                    </div>\n                    <div class="video-reviews__name">${n.title}</div>`)})});let o=!1;function swiperMode(){const e=window.matchMedia("(min-width: 0px) and (max-width: 580px)"),n=document.querySelector(".video-reviews__slider");n&&(e.matches?o||(o=!0,t=new Swiper(n,{slidesPerView:1,loop:!0,spaceBetween:15,autoHeight:!0,pagination:{el:".video-reviews__pagination",clickable:!0}})):(void 0!==t&&t.destroy(),o=!1))}window.addEventListener("load",swiperMode),window.addEventListener("resize",swiperMode)}Fancybox.defaults.hideScrollbar=!1;