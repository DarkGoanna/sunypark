"use strict";const html=document.documentElement,header=document.querySelector(".header"),headerRow_1=document.querySelector(".header__row_1"),headerRow_2=document.querySelector(".header__row_2"),menu=document.querySelector(".header__menu"),menuList=menu.querySelector(".menu"),burger=document.querySelector(".header__burger"),desktopBreakpoint=768;function addMenuArrow(){menu.querySelectorAll(".menu-item-has-children").forEach(e=>{e.insertAdjacentHTML("beforeend",'<button type="button" class="menu__arrow"></button>')})}function setIterationVar(){menu.querySelectorAll(".menu > li").forEach((e,t,o)=>{e.style.setProperty("--in",t),e.style.setProperty("--out",o.length-1-t)}),menu.querySelectorAll(".sub-menu").forEach(e=>{e.querySelectorAll("li").forEach((e,t,o)=>{e.style.setProperty("--sub_in",t),e.style.setProperty("--sub_out",o.length-1-t)})})}function addButtonComeback(){document.querySelectorAll(".sub-menu").forEach(e=>{e.insertAdjacentHTML("afterbegin",'<button type="button" class="menu__comeback">Назад</button>')})}function setSubmenuPosition(){document.querySelectorAll(".sub-menu").forEach(e=>{const t=menuList.offsetTop,o=e.parentElement.offsetTop-t;e.style.top=`-${o}px`})}function resetSubmenuPosition(){document.querySelectorAll(".sub-menu").forEach(e=>{e.style.top=""})}function addEventToMenuArrow(){document.querySelectorAll(".menu__arrow").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),e.closest(".menu-item-has-children").classList.toggle("open"),window.matchMedia("(max-width: 768px)").matches&&menuList.classList.toggle("show-sub-menu")},!0)})}function addEventToMenuItem(){menu.querySelectorAll(".menu-item-has-children").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),e.classList.toggle("open"),window.matchMedia("(max-width: 768px)").matches&&menuList.classList.toggle("show-sub-menu")},!0)})}function closeAllSubmenu(){menu.querySelectorAll(".menu-item-has-children").forEach(e=>{e.classList.remove("open")}),menu.querySelector(".menu").classList.remove("show-sub-menu")}function fixHeaderHeight(){header.nextElementSibling.style.paddingTop=header.offsetHeight+"px"}burger.addEventListener("click",()=>{burger.classList.toggle("open"),menu.classList.toggle("open"),menuList.classList.remove("show-sub-menu")}),window.addEventListener("resize",()=>{window.innerWidth>768?(burger.classList.remove("open"),menu.classList.remove("open"),closeAllSubmenu(),resetSubmenuPosition()):setSubmenuPosition()}),window.addEventListener("load",()=>{addMenuArrow(),addButtonComeback(),addEventToMenuArrow(),addEventToMenuItem(),setIterationVar(),window.matchMedia("(max-width: 768px)").matches&&setSubmenuPosition()}),window.addEventListener("load",fixHeaderHeight),window.addEventListener("resize",fixHeaderHeight);let prevScrollPosition=window.pageYOffset;function isApple(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function declOfNum(e,t){return t[e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2]}function checkboxStatus(e,t){const o=document.querySelector(t),n=declOfNum(e,["элемент","элемента","элементов"]);o.textContent=`${e} ${n} выбрано`;let s=!!e;o.setAttribute("data-hasChecked",s)}function addCustomCheckbox(e,t){const o=document.querySelectorAll(`${e} ${t}`);if(o.length){let t=0;o.forEach(o=>{o.insertAdjacentHTML("beforeend",'<span class="custom-checkbox"></span>');o.querySelector('input[type="checkbox"]').addEventListener("change",(function(){t=this.checked?++t:--t,checkboxStatus(t,e+" .cost-form__status-text")}))}),checkboxStatus(t,e+" .cost-form__status-text")}}function initCustomRadio(e,t){const o=document.querySelectorAll(`${e} ${t}`);if(o.length){const t=document.querySelector(e+" .cost-form__status-text");o.forEach(e=>{const o=e.querySelector('input[type="radio"]');o.addEventListener("change",(function(){this.checked&&(t.textContent=o.value,t.setAttribute("data-hasChecked",!0))}))})}}function openCustomSelect(e){const t=document.querySelector(e+" .cost-form__checkbox-wrapper"),o=document.querySelector(e+" .cost-form__arrow");document.addEventListener("click",n=>{const{target:s}=n;s.classList.contains(e+" cost-form__checkbox-wrapper")||s.closest(e+" .cost-form__checkbox-wrapper")?(t.classList.add("open"),o.classList.add("open")):s.classList.contains(e+" cost-form__status")||s.closest(e+" .cost-form__status")?(t.classList.toggle("open"),o.classList.toggle("open")):(t.classList.remove("open"),o.classList.remove("open"))})}window.addEventListener("scroll",()=>{const e=window.innerWidth>768?headerRow_1.offsetHeight:document.querySelector(".header").offsetHeight,t=window.pageYOffset;prevScrollPosition>t?header.style.top="0":t>400&&(header.style.top=`-${e}px`),prevScrollPosition=t}),window.addEventListener("load",()=>{isApple()&&document.querySelector("html").classList.add("ios")}),addCustomCheckbox(".cost-form__health",".cost-form__custom-checkbox"),initCustomRadio(".cost-form__city",".cost-form__custom-checkbox"),openCustomSelect(".cost-form__health"),openCustomSelect(".cost-form__city"),document.querySelector(".cost-form__trigger").addEventListener("click",(function(){this.closest(".cost-form").classList.toggle("open"),this.classList.toggle("hidden")}));